## Задача

Есть документ - заказ. У него - набор свойств (тип, способ доставки, способ обработки, док отгрузки, набор кодов товаров и тд).

Необходимо по этим параметрам быстро определить, какие типы операций понадобится выполнить на складе, для сборки этого заказа и их количество. Так как количество операций будет зависить не только от профиля заказа, но и от требуемого количества товара, то предлагается решать задачу в два этапа.

1. определить количество операций, как процент от исходного требуемого количества товара
2. исходя из процента и требуемого количества штук - опеределить количество операций, далее применив нормативы - оценить трудозатраты чел/час.

**Операции:** отбор паллеты, отбор коробки, отбор штуки, комиссионирование, вытеснение и др. (см. table_data billing_op_type).
На данном этапе в данных для обучения модели есть следующие операции: "op_pallet_pick" ,"op_cont_pick" ,"op_cont_deliver" ,"op_cont_aboard" ,"op_load_deliver".
Программа должна учитывать возможное добавление данных с другими операциями.

Необходимо реализовать сервис, который решает задачу #1. То есть, по параметрам заказа определит процент операций от исходного требуемого количества товара в заказе, которые надо выпонить для сборки этого заказа.  Сервис не должен ничего знать о требуемых количествах заказах в штуках (задачу #2 будет решать бизнес-логика самой системы WMS)

## Требования к реализации сервиса

Отдельное приложение (микросервис), возможно в докер-контейнере. Все взаимодействие с внешними системами (с WMS) - посредством REST-API. Не должно содержать ни в каком виде текущий код системы (классы, алгоритмы и тд). Не должно иметь подключения к БД WMS. "Вещь в себе".
Приложение (микросервис) должен иметь возможность обучения в двух режимах
1. начальное обучение (планируется произвести по уже существующим историческим данным)
2. дообучение в процессе работы (после выполнения каждого заказа)
По сути это один и тот же метод, с помощью которого

## Примерный API

1. /api/v1/order_fulfillment_forecast (запрос прогноза по детально)
**REQUEST**:
```
{
    order_id : OrderId,
    order_line : OrderLine,
    type : Type,
    processing_method : PM,
    shipping_method : SM,
    sku_id : SkuId
}
```

**RESPONCE** (операции будут согласно table_data billing_op_type):
```
{
    op_pallet_pick : 0.5,
    op_carton_pick : 0.4,
    op_unit_pick : 0.0,
    op_load_settle : 0.1,
    op_cont_settle : 0.05,
    op_load_deliver : 0.5,
    op_cont_deliver : 0.02
}
```

2. /api/v1/machine_learning_by_order - метод для обучения
REQUEST и RESPONCE - аналогичные

3. /api/v1/get_coefficients - метод для получения коэффиентов обученной сети, с целью бекапа , использования для тестирования и других опытов. На первом этапе можно и не делать.

## Пример: 

Заказ #ORD3522, тип="Доставка", способ доставки="вагон", способ обработки="Сборка в док".

Результат работы сервиса:
отбор паллет - 50%
отбор коробок - 40%
отбор штук - 0 %
работ на довоз паллет 50%
работ на довоз контейнеров 10%
комиссионирование 10%
вытеснение 5%



Andrei Diachkov (c) Solvo Ltd 2024
